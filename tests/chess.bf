->>++++>-->++>->--[++++[>+++++++++++++++<-]>++<<]>>++[ build constants
  [<<]+<[ if need to read more
    >[>>>]++++[ while more chars need reading this row
      >>,[[>]+<[-<]>]>>>>>>>[ letter
        -<+[<<<<<<+>>>>>>-]<[<<<++<+>>>>-]<[-]<[<+>-]<[<++>-]<[<<+>>-]>
      ]<[
        -<[++++[<[<++>-]>-[<+>-]<]<[--[>+<-]+>]->] number
        <+[-[[-<]<<[<]<->]+[-<+]>[>>]]   row terminator 
      ]<
    ]
  ]>[>>]++++++++[<<<----.++.......++>>+>-]<<<----.++++>>++.[-]>> output bar  
  [if row to output
    [while line to output
      [>]<[>[>>+<<-]<<]
      >>>>[for each space
        <<<[<]<<<<<<.<<-[ if we need to flip background
          +>[->>>>>++++[>+<--]] flip black to white
          +>>[>>>---[>++<-]>>]<[<+>-]<[<] or white to black
        ]>>[>]<.>>>[>]>>[<<+[<]<-[>>]>-] copy piece code
        >-[-<<+[<]<<[<<]+>>>+++[>>]]<<+[<] set fill and fill flag
        <+[ not an empty space
          >>-[<+>-]+<[<++++++>>+<-]< combine line with piece code
          [------[+++[+[+[----[--[-[-[+++++[------[-[-[-[-[-[-[-[[+] select
          <<-------.<<<<+<[>->>...[>]]>[->>>+++...--->>>>]<<<+.++++++>>> 4bknpqr
          ]<[.<.<..>>.>]> 1b (top of bishop; l value of 4)
          ]<[.<<.>----.++++.>.>]> 1k
          ]<[.<<+++.--->---.+++.<<<.[>]]> 1n
          ]<[..<<<<<[[>]<.>]>[>>+++.--->>>>]<<..>]> 1p
          ]<[.<<.<<.>>>.>.>]> 1q
          ]<[<<-.++++.<<.>>.--.->>>]> 1r
          ]<[.<<.<.>>.>.>]> 2b
          ]]<[.<<<<-.>.<++.->>>>.>]> 23k
          ]<[<.<+++.<.>>------.++++++<---.>>>]> 2n
          ]]]]<[.<-------.<<.>>+.++++++>.>]> 2pq3bq
          ]<[.<.<<.[>.>]]> 3p
          ]<[.<.<<.>..>>>]> 3n
          ]]<[.<<-.<.>++.->>.>]> 23r
        ]<[.....>] empty
        <.<<<<<<[>>>---<<<-]>>[>>]>[>]>> clear fill
      ]<<<<[<<<]>>.[>>]++++++++++.[-]>- output | and linefeed
    ]+[>]<[[-]<]< wipe line data
  ]<
]